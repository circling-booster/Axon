# **Axon Web Connect (Chrome Extension)**

**Axon Web Connect**는 로컬에서 실행 중인 **Axon (Dive Fork)** AI 애플리케이션과 브라우저를 연결해주는 크롬 확장 프로그램입니다. 어떤 웹페이지에서든 우측 하단의 플로팅 버튼을 통해 즉시 AI와 대화할 수 있으며, 현재 보고 있는 웹페이지의 내용을 문맥으로 전달하여 요약이나 질의응답을 수행할 수 있습니다.

*(예시 이미지: 웹페이지 우측 하단에 떠 있는 채팅창)*

## **✨ 주요 기능**

* **🌐 어디서든 실행**: 모든 웹사이트 우측 하단에 항상 접근 가능한 플로팅 버튼(FAB)을 제공합니다.  
* **💬 실시간 스트리밍 대화**: Axon 로컬 서버와 직접 통신하여 타자 치듯 실시간으로 답변이 생성됩니다 (SSE 지원).  
* **📄 페이지 컨텍스트 인식**: "현재 페이지 내용 포함" 버튼을 클릭하면, 보고 있는 웹페이지의 텍스트를 자동으로 긁어와 질문과 함께 전송합니다.  
* **🎨 격리된 스타일**: Shadow DOM 기술을 사용하여 웹페이지의 기존 CSS 스타일과 충돌하지 않는 깔끔한 UI를 제공합니다.

## **🛠️ 사전 준비 사항**

이 확장 프로그램은 단독으로 동작하지 않으며, 로컬 PC에 **Axon** 애플리케이션이 실행 중이어야 합니다.

1. **Axon 실행**: Axon 데스크톱 앱을 실행해 주세요.  
2. **서버 확인**: Axon은 내부적으로 localhost:19999 포트에서 API 서버를 구동합니다. 이 포트가 열려 있어야 통신이 가능합니다.

## **🚀 설치 방법**

이 확장 프로그램은 현재 Chrome Web Store에 등록되지 않은 로컬 개발용 버전입니다. "개발자 모드"를 통해 수동으로 설치해야 합니다.

### **1\. 파일 준비**

제공된 코드 파일 두 개를 로컬 폴더(예: axon-extension)에 저장합니다.

* manifest.json: 설정 파일  
* content.js: 로직 파일

### **2\. 크롬에 로드하기**

1. Chrome 브라우저 주소창에 chrome://extensions를 입력하여 이동합니다.  
2. 우측 상단의 **\[개발자 모드\]** 토글 스위치를 켭니다.  
3. 좌측 상단에 나타난 **\[압축해제된 확장 프로그램을 로드합니다\]** 버튼을 클릭합니다.  
4. manifest.json과 content.js 파일을 저장한 폴더(axon-extension)를 선택합니다.  
5. 목록에 "Axon Web Connect" 카드가 나타나면 설치 완료\! 🎉

## **📖 사용 방법**

1. **웹페이지 접속**: 아무 웹사이트나 접속하거나, 이미 열려있는 페이지를 **새로고침(F5)** 합니다.  
2. **버튼 클릭**: 화면 우측 하단에 파란색 **Axon 로고(말풍선 아이콘)** 버튼이 나타납니다. 이를 클릭하여 채팅창을 엽니다.  
3. **대화하기**:  
   * 입력창에 질문을 입력하고 Enter 또는 전송 버튼을 누릅니다.  
   * 답변이 실시간으로 스트리밍됩니다.  
4. **페이지 내용 물어보기**:  
   * 입력창 위의 **\[📄 현재 페이지 내용 포함\]** 버튼을 클릭하여 활성화(파란색 테두리)합니다.  
   * 질문을 입력하면(예: "이 페이지 요약해줘"), 현재 페이지의 본문 내용이 프롬프트 상단에 자동으로 붙어서 전송됩니다.

## **🔧 기술적 상세 내용**

### **아키텍처**

* **API 통신**: http://localhost:19999/api/chat 엔드포인트로 POST 요청을 보냅니다.  
* **데이터 포맷**: multipart/form-data 형식을 사용하여 chatId와 message를 전송합니다.  
* **스트리밍**: 서버로부터 Server-Sent Events (SSE) 형식의 응답을 받아, TextDecoder로 디코딩하여 실시간으로 메시지를 UI에 업데이트합니다.

### **보안 및 격리**

* **Shadow DOM**: 확장 프로그램의 HTML/CSS가 웹페이지의 스타일(bootstrap, tailwind 등)에 영향을 받거나 주지 않도록 attachShadow({mode: 'open'})을 사용하여 완벽하게 격리했습니다.  
* **권한**: activeTab 및 scripting 권한을 사용하여 현재 페이지의 텍스트에 접근합니다.

## **❓ 문제 해결 (Troubleshooting)**

### **Q. 버튼이 보이지 않아요.**

* 웹페이지를 새로고침 해보세요. 확장 프로그램 설치 전에 열려있던 탭에는 새로고침 후에 적용됩니다.  
* 일부 보안 정책이 매우 강력한 사이트(Chrome 설정 페이지 등)에서는 동작하지 않을 수 있습니다.

### **Q. "Axon 서버에 연결할 수 없습니다"라는 에러가 뜹니다.**

1. **Axon 앱 실행 확인**: Axon 프로그램이 켜져 있는지 확인하세요.  
2. **포트 확인**: Axon의 프록시 서버가 19999 포트를 사용 중인지 확인해야 합니다.  
   * *Windows (PowerShell)*: netstat \-an | findstr 19999  
   * *Mac/Linux*: lsof \-i :19999  
3. **네트워크**: 브라우저 개발자 도구(F12) \-\> Console 탭에서 네트워크 에러(CORS 등)가 있는지 확인하세요. Axon의 proxyServer.ts 설정에 CORS 허용(Access-Control-Allow-Origin: \*)이 되어 있어야 합니다.

### **Q. 페이지 내용 포함 기능이 작동하지 않아요.**

* 페이지가 완전히 로딩되지 않았거나, 텍스트가 iframe 내부에 있는 경우 내용을 가져오지 못할 수 있습니다.  
* 이미지가 많은 페이지보다는 텍스트 위주의 페이지(뉴스 기사, 블로그 등)에서 가장 잘 동작합니다.

## **📝 라이선스**

이 프로젝트는 Axon (Dive Fork) 프로젝트의 일부로 제공되는 확장 기능 예시입니다. 자유롭게 수정 및 배포가 가능합니다.